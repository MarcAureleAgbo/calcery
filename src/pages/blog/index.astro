---

import BaseLayout from '../../layouts/BaseLayout.astro';

import Card from '../../components/ui/Card.astro';

import Container from '../../components/ui/Container.astro';

import Button from '../../components/ui/Button.astro';

import { getCollection } from 'astro:content';

const posts = await getCollection('blog');

const sortedPosts = posts.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());

---

<BaseLayout title="Blog - Calcery" description="Articles et conseils sur les calculateurs et la gestion budgétaire.">

  <!-- Hero -->
  <section class="bg-white border-b border-gray-200 py-20">
    <Container>
      <div class="text-center max-w-4xl mx-auto">
        <h1 class="text-5xl md:text-6xl font-bold text-gray-900 mb-4 leading-tight">Articles & conseils</h1>
        <p class="text-xl text-gray-600 font-light">Découvrez nos articles sur la gestion budgétaire, les techniques d'épargne et les conseils pratiques pour optimiser vos finances.</p>
      </div>
    </Container>
  </section>

  <!-- Articles -->
  <section class="py-20 bg-white">
    <Container>
      <div class="mb-16">
        <h2 class="text-4xl font-bold text-center text-gray-900 mb-4">Blog</h2>
        <p class="text-lg text-gray-600 text-center max-w-2xl mx-auto">Les derniers articles pour maîtriser vos finances</p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        {sortedPosts.map(post => (
          <div class="bg-white border border-gray-200 rounded-xl p-8 shadow-sm hover:shadow-md hover:border-gray-300 transition-all hover:-translate-y-0.5">
            <div class="mb-4 flex items-start justify-between">
              <h3 class="text-2xl font-bold text-black flex-1"><a href={`/blog/${post.slug}`} class="hover:text-gray-700 transition-colors">{post.data.title}</a></h3>
            </div>
            <p class="text-gray-700 mb-6 leading-relaxed line-clamp-3">{post.data.description}</p>
            <div class="flex items-center justify-between">
              <p class="text-sm text-gray-500">Publié le <span class="font-medium">{new Date(post.data.date).toLocaleDateString('fr-FR')}</span></p>
              <a href={`/blog/${post.slug}`} class="inline-flex items-center text-black font-semibold hover:gap-2 transition-all gap-1">
                Lire →
              </a>
            </div>
          </div>
        ))}
      </div>
    </Container>
  </section>

  <!-- CTA -->
  <section class="bg-black text-white py-16">
    <Container>
      <div class="text-center">
        <h2 class="text-4xl font-bold text-white mb-4">Prêt à optimiser vos finances ?</h2>
        <p class="text-white/95 text-lg font-light mb-8">Essayez nos calculateurs gratuits et découvrez comment mieux gérer votre budget.</p>
        <Button variant="light" href="/calculateurs">Accéder aux outils</Button>
      </div>
    </Container>
  </section>

</BaseLayout>