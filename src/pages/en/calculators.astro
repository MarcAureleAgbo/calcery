---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Container from '../../components/ui/Container.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';
import ToolCard from '../../components/ToolCard.astro';
import { CATEGORIES, getCategoryRoute, getCalculatorsByCategory, type CategoryKey } from '../../lib/calculator-taxonomy';
import type { BreadcrumbItem } from '../../lib/types';

const breadcrumbs: BreadcrumbItem[] = [
  { name: 'Home', item: '/en' },
  { name: 'Calculators', item: '/en/calculators' },
];

const categoryIconByKey: Record<CategoryKey, string> = {
  finance: 'ðŸ’¼',
  health: 'ðŸ¥',
  realEstate: 'ðŸ ',
  dailyLife: 'ðŸ§­',
  home: 'ðŸ› ï¸',
  education: 'ðŸŽ“',
};

const categoryCards = CATEGORIES.map((category) => {
  const toolsCount = getCalculatorsByCategory(category.key).length;
  const suffix =
    toolsCount > 0
      ? `${toolsCount} tool${toolsCount > 1 ? 's' : ''} available.`
      : 'New tools coming soon.';

  return {
    icon: categoryIconByKey[category.key],
    title: category.name.en,
    description: `${category.description.en} ${suffix}`,
    href: getCategoryRoute('en', category.key),
  };
});
---

<BaseLayout
  title="Calculator categories | Calcery"
  description="Choose a category to quickly access Calcery calculators."
  lang="en"
>
  <section class="border-b border-gray-200/70 bg-gradient-to-b from-white via-gray-50/40 to-white py-8">
    <Container>
      <div class="mx-auto max-w-5xl">
        <Breadcrumbs items={breadcrumbs} />
      </div>
    </Container>
  </section>

  <section class="section pt-6">
    <div class="tools-grid">
      {categoryCards.map((category) => (
        <ToolCard
          icon={category.icon}
          title={category.title}
          description={category.description}
          href={category.href}
          ctaLabel="Explore"
        />
      ))}
    </div>
  </section>
</BaseLayout>
