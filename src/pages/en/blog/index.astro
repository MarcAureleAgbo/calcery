---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import Container from '../../../components/ui/Container.astro';
import Button from '../../../components/ui/Button.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blogEn');
const sortedPosts = posts.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---

<BaseLayout title="Blog - Calcery" description="Articles and guides on budget management and personal finance." lang="en">
  <section class="border-b border-gray-200 bg-white py-20">
    <Container>
      <div class="mx-auto max-w-4xl text-center">
        <h1 class="mb-4 text-5xl font-bold leading-tight text-gray-900 md:text-6xl">Articles & guides</h1>
        <p class="text-xl font-light text-gray-600">Practical finance content to help you make better money decisions.</p>
      </div>
    </Container>
  </section>

  <section class="bg-white py-20">
    <Container>
      <div class="mb-16 text-center">
        <h2 class="mb-4 text-4xl font-bold text-gray-900">Blog</h2>
        <p class="mx-auto max-w-2xl text-lg text-gray-600">Latest articles to improve your financial habits</p>
      </div>

      <div class="grid grid-cols-1 gap-8 md:grid-cols-2">
        {sortedPosts.map((post) => (
          <div class="rounded-xl border border-gray-200 bg-white p-8 shadow-sm transition-all hover:-translate-y-0.5 hover:border-gray-300 hover:shadow-md">
            <div class="mb-4 flex items-start justify-between">
              <h3 class="flex-1 text-2xl font-bold text-black">
                <a href={`/en/blog/${post.slug}`} class="transition-colors hover:text-gray-700">{post.data.title}</a>
              </h3>
            </div>
            <p class="mb-6 line-clamp-3 leading-relaxed text-gray-700">{post.data.description}</p>
            <div class="flex items-center justify-between">
              <p class="text-sm text-gray-500">Published on <span class="font-medium">{new Date(post.data.date).toLocaleDateString('en-US')}</span></p>
              <a href={`/en/blog/${post.slug}`} class="inline-flex items-center gap-1 font-semibold text-black transition-all hover:gap-2">
                Read â†’
              </a>
            </div>
          </div>
        ))}
      </div>
    </Container>
  </section>

  <section class="bg-black py-16 text-white">
    <Container>
      <div class="text-center">
        <h2 class="mb-4 text-4xl font-bold text-white">Ready to optimize your finances?</h2>
        <p class="mb-8 text-lg font-light text-white/95">Try our free calculators and turn insights into action.</p>
        <Button variant="light" href="/en/calculateurs">Open calculators</Button>
      </div>
    </Container>
  </section>
</BaseLayout>
