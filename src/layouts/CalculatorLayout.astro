---

import BaseLayout from './BaseLayout.astro';

import Breadcrumbs from '../components/Breadcrumbs.astro';

import FAQ from '../components/FAQ.astro';

import Card from '../components/ui/Card.astro';

import Container from '../components/ui/Container.astro';

import Badge from '../components/ui/Badge.astro';

import type { BreadcrumbItem, FAQItem, RelatedLink } from '../lib/types.ts';

export interface Props {

  title: string;

  description: string;

  breadcrumbs?: BreadcrumbItem[];

  faqs?: FAQItem[];

  updatedAt?: string;

  tips?: string[];

  disableDisclaimer?: boolean;

}

const { title, description, breadcrumbs = [], faqs = [], updatedAt, tips = [], disableDisclaimer = false } = Astro.props;

---

<BaseLayout title={title} description={description}>

  <div class="bg-slate-50 min-h-screen">

    <Container class="py-8">

      <Breadcrumbs items={breadcrumbs} />

      <!-- HEADER PREMIUM -->
      <div class="text-center mb-12">
        <h1 class="text-4xl font-bold text-primary mb-4">{title}</h1>
        <p class="text-xl text-gray-700 mb-6 max-w-2xl mx-auto">{description}</p>
        <div class="flex flex-wrap justify-center gap-2 mb-4">
          <Badge variant="success">Gratuit</Badge>
          <Badge variant="info">Sans inscription</Badge>
          <Badge variant="default">Calcul local</Badge>
        </div>
        <p class="text-sm text-gray-500">Vos données restent sur votre appareil. Aucune transmission.</p>
      </div>

      <!-- CALCULATEUR -->
      <div class="max-w-4xl mx-auto mb-12">
        <Card class="p-8">
          <h2 class="text-2xl font-semibold mb-6 text-center">Calculateur</h2>
          <slot />
        </Card>
      </div>

      <!-- CONSEILS RAPIDES -->
      {tips.length > 0 && (
        <section class="mb-12 max-w-4xl mx-auto">
          <h2 class="text-2xl font-semibold mb-6 text-center">Conseils rapides</h2>
          <Card class="p-6">
            <ul class="space-y-2">
              {tips.map((tip, index) => (
                <li key={index} class="flex items-start">
                  <span class="text-primary mr-2">•</span>
                  <span>{tip}</span>
                </li>
              ))}
            </ul>
          </Card>
        </section>
      )}

      <!-- COMMENT ÇA MARCHE -->
      <section class="mb-12 max-w-4xl mx-auto">
        <h2 class="text-2xl font-semibold mb-6 text-center">Comment ça marche ?</h2>
        <Card class="p-6">
          <slot name="how-it-works">
            <p>Explication par défaut du fonctionnement.</p>
          </slot>
        </Card>
      </section>

      <!-- EXEMPLES -->
      <section class="mb-12 max-w-4xl mx-auto">
        <h2 class="text-2xl font-semibold mb-6 text-center">Exemples</h2>
        <Card class="p-6">
          <slot name="examples">
            <p>Exemples d'utilisation.</p>
          </slot>
        </Card>
      </section>

      <!-- AVERTISSEMENT -->
      {!disableDisclaimer && (
        <section class="mb-12 max-w-4xl mx-auto">
          <div class="bg-yellow-50 border-l-4 border-yellow-400 p-6 rounded-r-lg">
            <h2 class="text-xl font-semibold mb-2 text-yellow-800">Avertissement</h2>
            <p class="text-yellow-700">Les calculateurs de ce site sont fournis à titre informatif uniquement. Ils ne constituent pas un conseil financier, fiscal ou juridique. Les résultats sont approximatifs et peuvent varier selon votre situation personnelle. Nous vous recommandons de consulter un professionnel qualifié pour des conseils personnalisés.</p>
          </div>
        </section>
      )}

      <!-- FAQ -->
      {faqs.length > 0 && (
        <section class="mb-12 max-w-4xl mx-auto">
          <h2 class="text-2xl font-semibold mb-6 text-center">FAQ</h2>
          <Card class="p-6">
            <FAQ items={faqs} />
          </Card>
        </section>
      )}

      {updatedAt && <p class="text-sm text-gray-500 text-center">Dernière mise à jour : {updatedAt}</p>}

    </Container>

  </div>

</BaseLayout>